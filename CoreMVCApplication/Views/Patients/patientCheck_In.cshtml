@model CoreMVCApplication.Models.PatientAppointment
@{
    ViewData["Title"] = "patientCheck_In";
    Layout = "~/Views/Shared/_GlobalLawLayout.cshtml";
}

@*<h1>patientCheck_In</h1>*@
<html>
<head>
    <style>
        .inputText {
            height: 56px;
            border: 1px solid #D8D8DC;
            border-radius: 8px;
            display: flex;
            -webkit-box-align: center;
            padding: 0px 15px;
            width: 100%;
            outline: none;
        }

        .text-area {
            border: 1px solid #D8D8DC;
            border-radius: 8px;
            resize: none;
            width: 100%;
            height: 80px;
            padding: 15px;
            font-family: inherit;
            font-size: inherit;
            line-height: inherit;
            outline: none;
        }
    </style>
   
    @*<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/css/selectize.bootstrap3.min.css" integrity="sha256-ze/OEYGcFbPRmvCnrSeKbRTtjG4vGLHXgOqsyLFTRjg=" crossorigin="anonymous" />*@
</head>
<body>
    <div>
        <form class="form-row" enctype="multipart/form-data">
            <div class="askforvetss">
                <div class="dashbord" style=" margin-top:0px !important;">
                    <div class="breadcrum_wrapper">
                        <ul class="breadcrum">
                            <li>
                                <a href="/Patients/PetAppointment">Appointments</a>
                            </li>
                            <li>
                                <span class="current">Patient Check-In</span>
                            </li>
                        </ul>
                    </div>
                    <div class="frame-heading only-data-grid">
                        <div class="heading flex-grid">
                            <div class="title back_button_box"><a href="javascript:void(0)" class="back_button"></a>Patient Check-In</div>
                        </div>
                    </div>
                    <div class="wrap-container only-saprate-table">
                        <div class="col-md-6">
                            <h5>Visit Information</h5>
                        </div>
                        <div class="col-md-12">
                            <div class="row">
                                <div>
                                    <input type="hidden" id="Id" />
                                    <input type="hidden" id="appointmentId" asp-for="Appointment_id" />
                                </div>
                                <div style="display:none">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label>Patient-ID</label>
                                            <input type="text" id="txtpetId" class="form-control inputText" placeholder="Pet Id" asp-for="petId" readonly />
                                        </div>
                                    </div>
                                </div>


                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Pet's Name</label>
                                        <input type="text" id="txtPet" class="form-control inputText" placeholder="Pet Name" asp-for="PetName" readonly />
                                    </div>
                                    @*<input type="text" id="txtpetName" class="form-control inputText" placeholder="Pet's Name" asp-for="PetName" />*@
                                </div>

                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Pet's Owner Name</label>
                                        <input type="text" id="txtPetOwner" class="form-control inputText" placeholder="Pet's Owner Name" asp-for="PetS_ParentName" readonly />
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Weight (Kg)</label>
                                        <input type="text" id="txtWeight" class="form-control inputText" placeholder="Weight (Kg)" asp-for="Pet_Weight" />
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>
                                            Body Temperature (°F)
                                        </label>
                                        <input type="text" id="txtTemperature" class="form-control inputText" style="height:70px" placeholder="Body Temperature (°F)" />
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Admission Date</label>
                                        <input type="date" id="txtAdmissiondate" class="form-control inputText" style="height:70px" placeholder="Admission Date" asp-for="Appointment_Date" />
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Admission Time</label>
                                        <select id="ddlAdmissionTime" asp-for="Appointment_Time" style="width:100%">
                                            <option value="">--Select Admission Time--</option>
                                            @if (ViewBag.AppointmentTime != null)
                                            {
                                                foreach (var item in ViewBag.AppointmentTime as List<SelectListItem>)
                                                {
                                                    <option value="@item.Value">@item.Text</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Last Vaccination Date</label>
                                        <input type="date" id="txtVaccination" class="form-control inputText" style="height:70px" placeholder="Last Vaccination Date" asp-for="Lvaccination_Date" />
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Appointment Type</label>
                                        <select class="inputText required" id="ddlappType" asp-for="Appointment_Type">
                                            <option value="">--Select Appointment Type--</option>
                                            @if (ViewBag.AppointmentType != null)
                                            {
                                                foreach (var item in ViewBag.AppointmentType as List<SelectListItem>)
                                                {
                                                    <option value="@item.Value">@item.Text</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Primary Diagnosis</label> <a href="#" data-toggle="modal" data-target="#AddDiagnoses">+ Add Diagnosis</a>
                                        <ul id="ulPdiagnoses" class="tabs">
                                        </ul>
                                        @*<textarea type="text" row="10" class="form-control text-area" id="txtPdiagnoses" asp-for="PrimaryDiagnoses"></textarea>*@
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Secondary Diagnosis</label>
                                        <ul id="ulSdiagnoses" class="tabs">
                                        </ul>
                                        @*<textarea type="text" row="10" class="form-control text-area" id="txtSdiagnoses" asp-for="SecondaryDiagnoses"></textarea>*@
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Procedures</label>
                                        <textarea type="text" row="10" class="form-control text-area" id="txtSdiagnoses" asp-for="Procedures"></textarea>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Allergies</label> <a href="#" data-toggle="modal" data-target="#AddAllergy">+ Add Allergy</a>
                                        <textarea type="text" row="10" class="form-control text-area" id="txtAllergies" asp-for="PatientAllergies"></textarea>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Reason for visit</label>
                                        <input type="text" id="txtReason" class="form-control inputText" style="height:70px" placeholder="Reason for visit" asp-for="Appointment_Notes" />
                                    </div>
                                </div>

                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label>Prescription</label>&nbsp;<a href="#" data-toggle="modal" data-target="#AddPrescription">+ Add Prescription</a>
                                        <textarea type="text" class="form-control text-area" id="txtPrescription" asp-for="Medication"></textarea>
                                    </div>
                                </div>
                                <div class="col-md-6" style="display:none">
                                    <div class="form-group">
                                        <label>Doctor Fees : </label>
                                        <label asp-for="doctor_Fees">@Model.doctor_Fees</label>
                                    </div>
                                </div>

                                <div class="clearfix"></div><br />
                                <div class="col-md-12 main-table" style="display:none">
                                    <table class="table" id="tblDiagnosis">
                                        <thead>
                                            <tr style="background: #F5F5FA !important;">
                                                <th>Diagnosis</th>
                                                <th>Medicine Category</th>
                                                <th>Salt</th>
                                                <th>Medicine</th>
                                                <th>Brand</th>
                                                <th>Composition</th>
                                                <th>Doses</th>
                                                <th>No of Days</th>
                                                <th>Date</th>
                                            </tr>
                                        </thead>
                                        <tbody class="DiagnosisBody">
                                        </tbody>
                                    </table>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <input type="button" value="Cancel" asp-action="patientCheck_In" asp-controller="Patients" class="form-control inputText" id="btnClear" />
                                        <input type="submit" class="btn btn-primary" value="@ViewBag.SubmitValue" asp-action="patientCheck_In" asp-controller="Patients" formmethod="post" id="btnsave" />
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="form-group">
                                        <h6 class="text-success">@ViewData["msg"]</h6>
                                    </div>
                                </div>

                                <section class="offer-area section">
                                    <div class="heading-area">
                                        <div class="container">
                                            <div class="offer-tab-link">
                                                <ul class="nav nav-tabs">
                                                    @*<li><a class="active" href="#History" data-toggle="tab">History</a></li>
                            <li><a href="#Photos" data-toggle="tab">Photos</a></li>*@
                                                    <li><a href="#AppointmentHistory" data-toggle="tab">Appointment</a></li>
                                                    <li><a href="#ImagingHistory" data-toggle="tab">Imaging</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="offer-tabs tab-content">
                                        <div class="offerslide tab-pane fade active show" id="History">
                                            <div class="offerItem active">
                                                <div class="offer-detail">
                                                    <div class="row">
                                                        <h6>History</h6>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="offerslide tab-pane fade" id="Photos">
                                            <div class="offerItem active">
                                                <div class="offer-detail">
                                                    <div class="row">
                                                        <h6>Photos</h6>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="offerslide tab-pane fade" id="AppointmentHistory">
                                            <div class="offerItem active">
                                                <div class="offer-detail">
                                                    <div class="row">
                                                        <div class="main-table">
                                                            <table class="table" style="width:100%" id="tblAppointmentHistory">
                                                                <thead>
                                                                    <tr style="background: #F5F5FA !important;">
                                                                        <th>Pet Parent Name</th>
                                                                        <th>Pet Name</th>
                                                                        <th>Breed</th>
                                                                        <th>Pet Type</th>
                                                                        <th>Appointment Status</th>
                                                                        <th>Appointment Date</th>
                                                                        <th>Appointment Type</th>
                                                                        <th>Time</th>
                                                                        @*<th></th>
                                                <th></th>*@
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @foreach (var item in ViewBag.PatientAppointment as List<PatientAppointment>)
                                                                    {
                                                                        <tr>
                                                                            <td>@item.PetS_ParentName</td>
                                                                            <td>@item.PetName</td>
                                                                            <td>@item.Breed</td>
                                                                            <td>@item.PetType</td>
                                                                            <td>@item.Appointment_status</td>
                                                                            <td>@item.Appointment_Date</td>
                                                                            <td>@item.Appointment_Type</td>
                                                                            <td>@item.Appointment_Time</td>
                                                                            @*<td><a class="fa fa-edit" data-toggle="collapse"                                                href="#" role="button"></a></td>
                                                    <td><a class="fa fa-trash-o" data-toggle="collapse"                                                href="#" role="button"></a></td>*@
                                                                        </tr>
                                                                    }
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="offerslide tab-pane fade" id="ImagingHistory">
                                            <div class="offerItem active">
                                                <div class="offer-detail">
                                                    <div class="row">
                                                        <div class="col-md-12 main-table">
                                                            <table class="table" style="width:100%" id="tblImagingHistory">
                                                                <thead>
                                                                    <tr style="background: #F5F5FA !important;">
                                                                        <th>Pet Parent Name</th>
                                                                        <th>Pet Name</th>
                                                                        <th>Imaging Radiologist</th>
                                                                        <th>Requested By</th>
                                                                        <th>Imaging Result</th>
                                                                        <th>Imaging Type</th>
                                                                        @*<th></th>
                                                <th></th>*@
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @foreach (var item in ViewBag.PatientAppointment as List<PatientAppointment>)
                                                                    {
                                                                        <tr>
                                                                            <td>@item.PetS_ParentName</td>
                                                                            <td>@item.PetName</td>
                                                                            <td>@item.Imaging_Radiologist</td>
                                                                            <td>@item.Requested_By</td>
                                                                            <td>@item.Imaging_Result</td>
                                                                            <td>@item.Imaging_Type</td>
                                                                            @*<td><a class="fa fa-edit" data-toggle="collapse" href="#" role="button"></a></td>
                                                    <td><a class="fa fa-trash-o" data-toggle="collapse" href="#" role="button"></a></td>*@
                                                                        </tr>
                                                                    }
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="AddDiagnoses" tabindex="-1" aria-labelledby="AddDiagnoseslbl" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="AddDiagnoseslbl">
                                Add Diagnosis
                            </h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="col-md-12">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <input type="hidden" id="dgid" />
                                            <input type="hidden" id="date" />
                                            <label>Diagnosis <span style="color:red">*</span></label>
                                            @*<textarea type="text" row="10" class="form-control text-area" id="txtDiagnosis"></textarea>*@
                                            <select name="diagnosis" id="ddldiagnosis" placeholder="Select diagnosis...." style="width:100%">
                                                <option selected="selected" value="">--Select diagnosis Type--</option>
                                                @if (ViewBag.Diagnosis != null)
                                                {
                                                    foreach (var item in ViewBag.Diagnosis as List<SelectListItem>)
                                                    {
                                                        <option value="@item.Value">@item.Text</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label>Date</label>
                                            <input type="date" id="txtdate" class="form-control" />
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <input type="checkbox" id="chkSecDiagnosis" />
                                            <label>Secondary Diagnosis</label>
                                        </div>
                                    </div>
                                </div>
                                <!--<div style="display:none">
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label>Medicine Category</label>
                    <select id="ddlCategory">
                        <option value="">-Select Medicine Category-</option>
                    </select>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label>Salt</label>
                    <select id="ddlSalt">
                        <option value="">-Select Salt-</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label>Medicine</label>
                    <select id="ddlMedicine">
                        <option value="">-Select Medicine-</option>
                    </select>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label>Brand</label>
                    <select id="ddlBrand">
                        <option value="">-Select Brand-</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label>Composition</label>
                    <select id="ddlComposition">
                        <option value="">-Select Composition-</option>
                    </select>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label>Doses</label>
                    <input type="text" id="txtdoses" placeholder="Doses" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label>No. of days</label>
                    <input type="text" id="txtdays" placeholder="No. of days" />
                </div>
            </div>
        </div>
    </div>-->

                                <div class="row">
                                    <div class="col-md-8">
                                        <input type="button" value="Cancel" id="btnClrDiagnosis" />
                                        <input type="button" class="btn btn-primary" value="+Add" id="btnAddDiagnosis" onclick="Validation()" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        @*<div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                    </div>*@
                    </div>
                </div>
            </div>

            <div class="modal fade" id="AddAllergy" tabindex="-1" aria-labelledby="Allergylbl" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="Allergylbl">
                                Add Allergy
                            </h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="col-md-12">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label>Name <span style="color:red">*</span></label>
                                            <textarea type="text" row="10" class="form-control text-area" id="txtName"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-8">
                                        <input type="button" value="Add" id="btnAddAllergy" onclick="AllergyValidation()" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        @*<div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                    </div>*@
                    </div>
                </div>
            </div>

            <div class="modal fade" id="AddPrescription" tabindex="-1" aria-labelledby="Prescriptionlbl" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="Prescriptionlbl">
                                Add Prescription
                            </h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body" style="padding: 0px 15px;">
                            <div class="row">
                                <input type="hidden" id="hid" />
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Medicine Category</label>
                                        <select id="ddlCategory">
                                            <option value="">-Select Medicine Category-</option>
                                            @if (ViewBag.MedicineCategory != null)
                                            {
                                                foreach (var item in ViewBag.MedicineCategory as List<SelectListItem>)
                                                {
                                                    <option value="@item.Value">@item.Text</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Type</label>
                                        <select id="ddlType">
                                            <option value="">-Select Type-</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Salt</label>
                                        <select id="ddlSalt">
                                            <option value="">-Select Salt-</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Medicine</label>
                                        <select id="ddlMedicine">
                                            <option value="">-Select Medicine-</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Brand</label>
                                        <select id="ddlBrand">
                                            <option value="">-Select Brand-</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Composition</label>
                                        <select id="ddlComposition">
                                            <option value="">-Select Composition-</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Dosage</label>
                                        <select id="ddldoses">
                                            <option value="0">-Select Dosage-</option>
                                            <option value="1">1-0-1</option>
                                            <option value="2">1-1-1</option>
                                            <option value="3">1-1-1-1</option>
                                            <option value="4">0-0-1</option>
                                            <option value="5">2-0-2</option>
                                            <option value="6">2-2-2</option>
                                            <option value="7">0-0-2</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Duration</label>
                                        <select id="ddlduration">
                                            <option value="0">-Select Duration-</option>
                                            <option value="1">3 days</option>
                                            <option value="2">4 days</option>
                                            <option value="3">5 days</option>
                                            <option value="4">6 days</option>
                                            <option value="5">15 days</option>
                                            <option value="6">30 days</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <input type="button" id="btnPrescription" value=" + Add" class="btn btn-primary" />
                            </div>
                        </div>
                        @*<div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                    </div>*@
                    </div>
                </div>
            </div>
        </form>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>
    <script>
        var i = 0; currentRow = null;
        function Validation() {
            var msg = "";
            if ($('#txtDiagnosis').val() == '') { msg = "Diagnosis Can not left Blank !!\n"; }
            // if ($('#txtdate').val() == '') { msg += "Date can not left Blank !! \n"; }
            if (msg != "") { alert(msg); return false; }
        }
        function AllergyValidation() {
            var msg = "";
            if ($('#txtName').val() == '') { msg = "Name Can not left Blank !!\n"; }
            if (msg != "") { alert(msg); return false; }
        }
        $(document).ready(function () {
            $("#ddldiagnosis").select2({
                dropdownParent: $("#AddDiagnoses")
            });
            // $("#ddldiagnosis").select2();
            $("#ddlAdmissionTime").select2();
            $("#ddlPetType1").select2();
        });
        $(function () {
            $('#btnAddDiagnosis').click(function () {
                i++;
                var Diagnosis = $('#ddldiagnosis').find("option:selected").val();
                var DiagnosisText = $('#ddldiagnosis').find("option:selected").text();
                var date = $('#txtdate').val();
                var SecDiagnosis = $('#chkSecDiagnosis').is(":checked") ? 1 : 0;
                //var PrimaryDiagnoses = i + ")" + " " + DiagnosisText + date + '<br/>';
                var PrimaryDiagnosis = DiagnosisText +"\t"+ "(" + date + ")";
                if (SecDiagnosis == '1') {
                    /*$('#txtSdiagnoses').append(PrimaryDiagnoses);       */
                    $("#ulSdiagnoses").append('<li><input type="hidden" id="diagmosisID" value="' + Diagnosis + '" /><a data-toggle="modal" data-target="#AddDiagnoses" onclick="return OpenModel(' + Diagnosis + ','+date +')">' + PrimaryDiagnosis + '</a></li>');
                }
                else {
                    $("#ulPdiagnoses").append('<li><input type="hidden" id="diagmosisID" value="' + Diagnosis + '" /><a data-toggle="modal" data-target="#AddDiagnoses" onclick="return OpenModel(' + Diagnosis + ','+date+')">' + PrimaryDiagnosis + '</a></li>');
                }
            });
        });
        function OpenModel(Diagnosis, date) {
            $('#dgid').val(Diagnosis);
            $('#date').val(date);
            $("#ddldiagnosis").val(Diagnosis).trigger('change');
            $('#txtdate').val(date).trigger('change');
            //$('#ddldiagnosis  option[value=' + Diagnosis + ']').attr('selected', 'selected');
           // $("#ddldiagnosis").selectpicker("refresh");
        }
        $(function () {
            $('#btnPrescription').click(function () {
                var MedicineCategoryId = $('#ddlCategory').find("option:selected").val();
                var MedicineCategoryText = $('#ddlCategory').find("option:selected").text();
                var MedicineTypeId = $('#ddlType').find("option:selected").val();
                var MedicineTypeText = $('#ddlType').find("option:selected").text();
                var SaltId = $('#ddlSalt').find("option:selected").val();
                var SaltText = $('#ddlSalt').find("option:selected").text();
                var MedicineId = $('#ddlMedicine').find("option:selected").val();
                var MedicineText = $('#ddlMedicine').find("option:selected").text();
                var BrandId = $('#ddlBrand').find("option:selected").val();
                var BrandText = $('#ddlBrand').find("option:selected").text();
                var CompositionId = $('#ddlComposition').find("option:selected").val();
                var CompositionText = $('#ddlComposition').find("option:selected").text();
                var DosageId = $('#ddldoses').find("option:selected").val();
                var DosageText = $('#ddldoses').find("option:selected").text();
                var DurationId = $('#ddlduration').find("option:selected").val();
                var DurationText = $('#ddlduration').find("option:selected").text();
                $('#txtPrescription').append(MedicineCategoryText + " " + MedicineTypeText + " " + SaltText + " " + MedicineText + " " + BrandText + " " + CompositionText + " " + DosageText + " " + DurationText);
            });
        });
        $(function () {
            $('#btnAddAllergy').click(function () {
                var Name = $('#txtName').val();
                $('#txtAllergies').append(Name);
            });
        });
        $("#ddldiagnosis").change(function () {
          //  GetMedicineCategory()
        });
        function GetMedicineCategory() {
            var selected_val = $('#ddldiagnosis').find(":selected").attr('value');
            $("#ddlCategory").prop("disabled", true);
            $.ajax({  //ajax call
                type: "GET",      //method == GET
                url: "/Patients/PopulateMedicineCategory", //url to be called
                data: "id=" + selected_val, //data to be send
                success: function (json) {
                    $("#ddlCategory").empty();
                    json = json || {};
                    for (var i = 0; i < json.length; i++) {
                        $("#ddlCategory").append('<option value="' + json[i].value + '">' + json[i].text + '</option>');
                    }
                    $("#ddlCategory").prop("disabled", false);
                    GetMedicineSalt();
                    GetMedicine();
                    GetMedicineBrand();
                    GetMedicineComposition();
                },
                error: function () {
                    alert("Data Not Found");
                }
            });
        }
        $("#ddlCategory").change(function () {
            GetMedicineSalt()
            //GetMedicine();
            //GetMedicineBrand();
            //GetMedicineComposition();
        });
        function GetMedicineSalt() {
           var selected_val = $('#ddlCategory').find(":selected").attr('value');
            $("#ddlSalt").prop("disabled", true);
            $.ajax({
                type: "GET",
                url: "/Patients/PopulateMedicineSalt",
                data: "id=" + selected_val,
                success: function (json) {
                    $("#ddlSalt").empty();
                    json = json || {};
                    for (var i = 0; i < json.length; i++) {
                        $("#ddlSalt").append('<option value="' + json[i].value + '">' + json[i].text + '</option>');
                    }
                    $("#ddlSalt").prop("disabled", false);
                    GetMedicine();
                    //GetMedicineBrand();
                    //GetMedicineComposition();
                },
                error: function () {
                    alert("Data Not Found");
                }
            });
        }
        $("#ddlSalt").change(function () {
            GetMedicine()
        });
        function GetMedicine() {
            var selected_val = $('#ddlSalt').find(":selected").attr('value');
            $("#ddlMedicine").prop("disabled", true);
            $.ajax({
                type: "GET",
                url: "/Patients/PopulateMedicine",
                data: "id=" + selected_val,
                success: function (json, result) {
                    $("#ddlMedicine").empty();
                    json = json || {};
                    for (var i = 0; i < json.length; i++) {
                        $("#ddlMedicine").append('<option value="' + json[i].value + '">' + json[i].text + '</option>');
                    }
                    $("#ddlMedicine").prop("disabled", false);
                    GetMedicineBrand();
                    //GetMedicineComposition();
                },
                error: function () {
                    alert("Data Not Found");
                }
            });
        }
        $("#ddlMedicine").change(function () {
            GetMedicineBrand()
        });
        function GetMedicineBrand() {
            var selected_val = $('#ddlMedicine').find(":selected").attr('value');
            $("#ddlBrand").prop("disabled", true);
            $.ajax({
                type: "GET",
                url: "/Patients/PopulateMedicineBrand",
                data: "id=" + selected_val,
                success: function (json, result) {
                    $("#ddlBrand").empty();
                    json = json || {};
                    for (var i = 0; i < json.length; i++) {
                        $("#ddlBrand").append('<option value="' + json[i].value + '">' + json[i].text + '</option>');
                    }
                    $("#ddlBrand").prop("disabled", false);
                    GetMedicineComposition();
                },
                error: function () {
                    alert("Data Not Found");
                }
            });
        }
        $("#ddlBrand").change(function () {
            GetMedicineComposition();
        });
        function GetMedicineComposition() {
            var selected_val = $('#ddlBrand').find(":selected").attr('value');
            $("#ddlComposition").prop("disabled", true);
            $.ajax({
                type: "GET",
                url: "/Patients/PopulateMedicineComposition",
                data: "id=" + selected_val,
                success: function (json, result) {
                    $("#ddlComposition").empty();
                    json = json || {};
                    for (var i = 0; i < json.length; i++) {
                        $("#ddlComposition").append('<option value="' + json[i].value + '">' + json[i].text + '</option>');
                    }
                    $("#ddlComposition").prop("disabled", false);
                },
                error: function () {
                    alert("Data Not Found");
                }
            });
        }
        $(document).ready(function () {
            var now = new Date();
            var day = ("0" + now.getDate()).slice(-2);
            var month = ("0" + (now.getMonth() + 1)).slice(-2);
            var today = now.getFullYear() + "-" + (month) + "-" + (day);
           // var today = now.day + "-" + (month) + "-" + (getFullYear());
            $('#txtdate').val(today);
            $('#txtdate').attr('max', today);
        });
        $(document).ready(function () {
            var now = new Date();
            var day = ("0" + now.getDate()).slice(-2);
            var month = ("0" + (now.getMonth() + 1)).slice(-2);
            var today = now.getFullYear() + "-" + (month) + "-" + (day);
            $('#txtVaccination').val(today);
            $('#txtVaccination').attr('max', today);
        });
    </script>
</body>
</html>



